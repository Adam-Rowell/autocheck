# file(GLOB TEST_SOURCE_PATHS "*.cpp" CONFIGURE_DEPENDS)
file(GLOB TEST_SOURCE_PATHS "*.cpp")
foreach(TEST_SOURCE_PATH ${TEST_SOURCE_PATHS})
  get_filename_component(TEST_SOURCE_NAME ${TEST_SOURCE_PATH} NAME)
  string(REPLACE ".cpp" "" TEST_NAME ${TEST_SOURCE_NAME})
  add_executable(${TEST_NAME} ${TEST_SOURCE_PATH})
  target_link_libraries(${TEST_NAME} PRIVATE autocheck::autocheck)
  target_link_libraries(${TEST_NAME} PRIVATE gtest_main)
  add_test(NAME ${TEST_NAME} COMMAND ${TEST_NAME})
endforeach(TEST_SOURCE_PATH ${TEST_SOURCE_PATHS})
